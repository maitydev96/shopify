{
  "version": 3,
  "sources": ["../src/builder.ts"],
  "sourcesContent": ["import type {\n  ActionFunctionMetadata,\n  AnyActionFunction,\n  AnyModelFinderMetadata,\n  AnyModelManager,\n  BaseFindOptions,\n  FieldSelection,\n  FindManyOptions,\n  GadgetConnection,\n  GadgetRecord,\n  VariablesOptions,\n} from \"@gadgetinc/api-client-core\";\nimport {\n  actionOperation,\n  actionRunner,\n  findManyOperation,\n  findManyRunner,\n  findOneByFieldOperation,\n  findOneByFieldRunner,\n  findOneOperation,\n  findOneRunner,\n  globalActionOperation,\n  globalActionRunner,\n} from \"@gadgetinc/api-client-core\";\nimport type { ComputedViewWithoutVariables, ComputedViewWithVariables } from \"./computedViews.js\";\nimport { computedViewOperation, computedViewRunner, inlineComputedViewRunner } from \"./computedViews.js\";\n\n/**\n * The metadata that we need for building the runtime version of a finderoperation\n * Excludes the type-time only keys\n */\nexport type AnyModelFinderRuntimeMetadata = Omit<AnyModelFinderMetadata, \"schemaType\" | \"optionsType\" | \"variablesType\" | \"selectionType\">;\n\n/**\n * The metadata that we need for building the runtime version of a finder operation\n * Excludes the type-time only keys\n */\nexport type AnyActionFunctionRuntimeMetadata = Omit<\n  ActionFunctionMetadata<any, any, any, any, any, any>,\n  \"schemaType\" | \"optionsType\" | \"variablesType\" | \"selectionType\"\n>;\n\nexport type FindOneOperation = {\n  type: \"findOne\";\n  findByVariableName: \"id\";\n} & AnyModelFinderRuntimeMetadata;\n\nexport type MaybeFindOneOperation = {\n  type: \"maybeFindOne\";\n  findByVariableName: \"id\";\n} & AnyModelFinderRuntimeMetadata;\n\nexport type FindManyOperation = {\n  type: \"findMany\";\n} & AnyModelFinderRuntimeMetadata;\n\nexport type FindFirstOperation = {\n  type: \"findFirst\";\n} & AnyModelFinderRuntimeMetadata;\n\nexport type MaybeFindFirstOperation = {\n  type: \"maybeFindFirst\";\n} & AnyModelFinderRuntimeMetadata;\n\nexport type FindOneByFieldOperation = {\n  type: \"findOne\";\n  findByVariableName: string;\n  findByField: string;\n  functionName: string;\n} & AnyModelFinderRuntimeMetadata;\n\nexport type MaybeFindOneByFieldOperation = {\n  type: \"maybeFindOne\";\n  findByVariableName: string;\n  findByField: string;\n  functionName: string;\n} & AnyModelFinderRuntimeMetadata;\n\nexport type SingletonGetOperation = {\n  type: \"get\";\n} & AnyModelFinderRuntimeMetadata;\n\nexport type ActionOperation = {\n  type: \"action\";\n  functionName: string;\n  isBulk: false;\n  isDeleter: boolean;\n} & AnyActionFunctionRuntimeMetadata;\n\nexport type BulkActionOperation = {\n  type: \"action\";\n  functionName: string;\n  isBulk: true;\n  singleActionFunctionName: string;\n  isDeleter: boolean;\n} & AnyActionFunctionRuntimeMetadata;\n\nexport type GlobalActionOperation = {\n  type: \"globalAction\";\n  functionName: string;\n  operationName: string;\n  operationReturnType?: string;\n  namespace: string | string[] | null;\n  variables: VariablesOptions;\n};\n\nexport type ComputedViewOperation = {\n  type: \"computedView\";\n  operationName: string;\n  functionName: string; // Same as operationName, but required by ModelManagers\n  gqlFieldName: string; // The field name of the operation in GQL schema (includes model for model views)\n  namespace: string | string[] | null;\n  /**\n   * The list of GraphQL typenames that contribute to this view's expression\n   * The view should be invalidated and refreshed client side when changes are made to these typenames\n   */\n  referencedTypenames?: string[];\n  /**\n   * List of model keys that contribute to this view's expression\n   */\n  referencedModelKeys?: string[];\n  variables?: VariablesOptions;\n};\n\nexport type StubbedComputedViewOperation = {\n  type: \"stubbedComputedView\";\n  operationName: string;\n  functionName: string; // Same as operationName, but required by ModelManagers\n  gqlFieldName: string; // The field name of the operation in GQL schema (includes model for model views)\n  namespace: string | string[] | null;\n  errorMessage: string;\n};\n\nexport type StubbedActionReason = \"MissingApiTrigger\";\n\nexport type StubbedActionOperation = {\n  type: \"stubbedAction\";\n  functionName: string;\n  operationName?: string;\n  errorMessage: string;\n  actionApiIdentifier: string;\n  modelApiIdentifier?: string;\n  variables: VariablesOptions;\n  reason: StubbedActionReason;\n  dataPath: string;\n};\n\nexport type ModelManagerOperation =\n  | FindOneOperation\n  | MaybeFindOneOperation\n  | FindManyOperation\n  | FindFirstOperation\n  | MaybeFindFirstOperation\n  | FindOneByFieldOperation\n  | MaybeFindOneByFieldOperation\n  | SingletonGetOperation\n  | ActionOperation\n  | BulkActionOperation\n  | StubbedActionOperation\n  | ComputedViewOperation\n  | StubbedComputedViewOperation;\n\n/**\n * Construct a model manager class out of the metadatas generated on the server\n **/\nexport const buildModelManager = (\n  apiIdentifier: string,\n  pluralApiIdentifier: string,\n  defaultSelection: FieldSelection,\n  operationGroup: ModelManagerOperation[] | readonly ModelManagerOperation[]\n): AnyModelManager => {\n  const modelManagerClass = class {\n    constructor(public readonly connection: GadgetConnection) {}\n  } as unknown as { prototype: AnyModelManager; new (connection: GadgetConnection): AnyModelManager };\n  Object.defineProperty(modelManagerClass, \"name\", { value: `${apiIdentifier}Manager` });\n\n  for (const operation of operationGroup) {\n    switch (operation.type) {\n      case \"maybeFindOne\":\n      case \"findOne\": {\n        const throwOnRecordNotFound = !operation.type.startsWith(\"maybe\");\n\n        if (\"functionName\" in operation) {\n          (modelManagerClass.prototype as any)[operation.functionName] = Object.assign(\n            function (this: AnyModelManager, value: string, options?: BaseFindOptions) {\n              return findOneByFieldRunner(\n                this,\n                operation.operationName,\n                operation.findByField,\n                value,\n                defaultSelection,\n                apiIdentifier,\n\n                options,\n                throwOnRecordNotFound,\n                operation.namespace\n              );\n            },\n            operation as unknown as AnyModelFinderMetadata,\n            {\n              plan: function (fieldName: string, fieldValue: string, options?: BaseFindOptions) {\n                return findOneByFieldOperation(\n                  operation.operationName,\n                  fieldName,\n                  fieldValue,\n                  defaultSelection,\n                  apiIdentifier,\n                  options,\n                  operation.namespace\n                );\n              },\n            }\n          );\n        } else {\n          modelManagerClass.prototype[operation.type] = Object.assign(\n            function (this: AnyModelManager, id: string, options?: BaseFindOptions) {\n              const response = findOneRunner(\n                this,\n                apiIdentifier,\n                id,\n                defaultSelection,\n                apiIdentifier,\n                options,\n                throwOnRecordNotFound,\n                operation.namespace\n              );\n              return forEachMaybeLiveResponse(response, (record: GadgetRecord<any>) => (record.isEmpty() ? null : record));\n            },\n            operation as unknown as AnyModelFinderMetadata,\n            {\n              plan: function (value: string, options?: BaseFindOptions) {\n                return findOneOperation(operation.operationName, value, defaultSelection, apiIdentifier, options, operation.namespace);\n              },\n            }\n          );\n        }\n        break;\n      }\n\n      case \"findMany\": {\n        modelManagerClass.prototype.findMany = Object.assign(\n          function (this: AnyModelManager, options?: FindManyOptions) {\n            return findManyRunner(this, pluralApiIdentifier, defaultSelection, apiIdentifier, options, undefined, operation.namespace);\n          },\n          operation as unknown as AnyModelFinderMetadata,\n          {\n            plan: function (options?: FindManyOptions) {\n              return findManyOperation(pluralApiIdentifier, defaultSelection, apiIdentifier, options, operation.namespace);\n            },\n          }\n        );\n        break;\n      }\n      case \"maybeFindFirst\":\n      case \"findFirst\": {\n        modelManagerClass.prototype[operation.type] = Object.assign(\n          function (this: AnyModelManager, options?: BaseFindOptions) {\n            const response = findManyRunner(\n              this,\n              pluralApiIdentifier,\n              defaultSelection,\n              apiIdentifier,\n              {\n                ...options,\n                first: 1,\n                last: undefined,\n                before: undefined,\n                after: undefined,\n              },\n              operation.type != \"maybeFindFirst\",\n              operation.namespace\n            );\n            return forEachMaybeLiveResponse(response, (list: GadgetRecord<any>[]) => list?.[0] ?? null);\n          },\n          operation as unknown as AnyModelFinderMetadata,\n          {\n            plan: function (options?: BaseFindOptions) {\n              return findManyOperation(\n                pluralApiIdentifier,\n                defaultSelection,\n                apiIdentifier,\n                {\n                  ...options,\n                  first: 1,\n                  last: undefined,\n                  before: undefined,\n                  after: undefined,\n                },\n                operation.namespace\n              );\n            },\n          }\n        );\n        break;\n      }\n\n      case \"get\": {\n        (modelManagerClass.prototype as any).get = Object.assign(function (this: AnyModelManager, options?: BaseFindOptions) {\n          return findOneRunner(\n            this,\n            operation.operationName,\n            undefined,\n            defaultSelection,\n            apiIdentifier,\n            options,\n            undefined,\n            operation.namespace\n          );\n        }, operation as unknown as AnyModelFinderMetadata);\n        break;\n      }\n      case \"action\": {\n        if (operation.isBulk) {\n          const bulkInvokedByIDOnly = !!operation.variables[\"ids\"];\n\n          (modelManagerClass.prototype as any)[operation.functionName] = Object.assign(\n            async function (this: AnyModelManager, inputs: string[] | Record<string, unknown>[], options?: BaseFindOptions) {\n              let variables;\n              if (bulkInvokedByIDOnly) {\n                variables = {\n                  ids: {\n                    ...operation.variables[\"ids\"],\n                    value: inputs,\n                  },\n                };\n              } else {\n                variables = {\n                  inputs: {\n                    ...operation.variables[\"inputs\"],\n                    value: (inputs as Record<string, unknown>[]).map((input) =>\n                      disambiguateActionParams((this as any)[(operation as BulkActionOperation).singleActionFunctionName], undefined, input)\n                    ),\n                  },\n                };\n              }\n\n              return await actionRunner(\n                this,\n                operation.operationName,\n                operation.isDeleter ? null : defaultSelection,\n                apiIdentifier,\n                operation.modelSelectionField,\n                true,\n                variables,\n                options,\n                operation.namespace,\n                operation.hasReturnType as any\n              );\n            },\n            operation as unknown as AnyModelFinderMetadata,\n            {\n              plan: function (options?: BaseFindOptions) {\n                return actionOperation(\n                  operation.operationName,\n                  operation.isDeleter ? null : operation.defaultSelection,\n                  apiIdentifier,\n                  operation.modelSelectionField,\n                  operation.variables,\n                  options,\n                  operation.namespace,\n                  true,\n                  operation.hasReturnType\n                );\n              },\n              get singleAction() {\n                return (modelManagerClass.prototype as any)[(operation as BulkActionOperation).singleActionFunctionName];\n              },\n            }\n          );\n        } else {\n          const hasId = !!operation.variables[\"id\"];\n          const hasOthers = Object.keys(operation.variables).filter((key) => key != \"id\").length > 0;\n          (modelManagerClass.prototype as any)[operation.functionName] = Object.assign(\n            async function (this: AnyModelManager, ...args: (string | Record<string, unknown> | BaseFindOptions)[]) {\n              const [variables, options] = actionArgs(operation, hasId, hasOthers, args);\n\n              return await actionRunner(\n                this,\n                operation.operationName,\n                operation.isDeleter ? null : defaultSelection,\n                apiIdentifier,\n                operation.modelSelectionField,\n                false,\n                variables,\n                options,\n                operation.namespace,\n                operation.hasReturnType as any\n              );\n            },\n            operation as unknown as AnyModelFinderMetadata,\n            {\n              plan: function (options?: BaseFindOptions) {\n                return actionOperation(\n                  operation.operationName,\n                  operation.isDeleter ? null : operation.defaultSelection,\n                  apiIdentifier,\n                  operation.modelSelectionField,\n                  operation.variables,\n                  options,\n                  operation.namespace,\n                  false,\n                  operation.hasReturnType\n                );\n              },\n            }\n          );\n        }\n        break;\n      }\n      case \"stubbedAction\": {\n        (modelManagerClass.prototype as any)[operation.functionName] = Object.assign(function (this: AnyModelManager, ..._args: any) {\n          sendDevHarnessStubbedActionEvent(operation);\n          throw new Error(operation.errorMessage);\n        }, operation as unknown as AnyModelFinderMetadata);\n        break;\n      }\n      case \"computedView\": {\n        (modelManagerClass.prototype as any)[operation.operationName] = isInlineComputedView(operation)\n          ? buildInlineModelComputedView(operation)\n          : buildModelComputedView(operation);\n        break;\n      }\n      case \"stubbedComputedView\": {\n        (modelManagerClass.prototype as any)[operation.operationName] = buildStubbedComputedView(operation);\n        break;\n      }\n    }\n  }\n\n  return modelManagerClass as any;\n};\n\nexport const buildGlobalAction = (\n  client: { connection: GadgetConnection },\n  operation: GlobalActionOperation | StubbedActionOperation\n): AnyActionFunction => {\n  if (operation.type == \"stubbedAction\") {\n    return Object.assign((..._args: any[]) => {\n      sendDevHarnessStubbedActionEvent(operation);\n      throw new Error(operation.errorMessage);\n    }, operation) as any;\n  } else {\n    return Object.assign(\n      async (variables: Record<string, any> = {}) => {\n        const resultVariables: VariablesOptions = {};\n        for (const [name, variable] of Object.entries(operation.variables)) {\n          resultVariables[name] = {\n            value: variables[name],\n            ...variable,\n          };\n        }\n\n        return await globalActionRunner(client.connection, operation.operationName, resultVariables, operation.namespace);\n      },\n      operation,\n      {\n        plan: function (operationName: string, variables: VariablesOptions, namespace: string) {\n          return globalActionOperation(operationName, variables, namespace);\n        },\n      }\n    ) as any;\n  }\n};\n\nexport function buildStubbedComputedView(operation: StubbedComputedViewOperation): () => Promise<never> {\n  return Object.assign(async () => {\n    throw new Error(operation.errorMessage);\n  }, operation);\n}\n\nexport function buildComputedView<ResultT>(\n  client: { connection: GadgetConnection },\n  operation: ComputedViewOperation\n): ComputedViewWithoutVariables<ResultT>;\nexport function buildComputedView<VariablesT, ResultT>(\n  client: { connection: GadgetConnection },\n  operation: ComputedViewOperation\n): ComputedViewWithVariables<VariablesT, ResultT>;\nexport function buildComputedView<VariablesT, ResultT>(\n  client: { connection: GadgetConnection },\n  operation: ComputedViewOperation\n): ComputedViewWithVariables<VariablesT, ResultT> | ComputedViewWithoutVariables<ResultT> {\n  const f = operation.variables\n    ? async (variables: Record<string, any> = {}) => {\n        let variablesOptions: VariablesOptions | undefined;\n        if (operation.variables) {\n          variablesOptions = {};\n          for (const [name, variable] of Object.entries(operation.variables)) {\n            variablesOptions[name] = {\n              value: variables[name],\n              ...variable,\n            };\n          }\n        }\n        return await computedViewRunner(client.connection, operation.gqlFieldName, variablesOptions, operation.namespace);\n      }\n    : async () => {\n        return await computedViewRunner(client.connection, operation.gqlFieldName, undefined, operation.namespace);\n      };\n\n  return Object.assign(f, operation, {\n    plan: function (variables: VariablesOptions) {\n      return computedViewOperation(operation.gqlFieldName, variables, operation.namespace);\n    },\n  }) as any;\n}\n\nexport function buildModelComputedView<ResultT>(operation: ComputedViewOperation): ComputedViewWithoutVariables<ResultT>;\nexport function buildModelComputedView<VariablesT, ResultT>(\n  operation: ComputedViewOperation\n): ComputedViewWithVariables<VariablesT, ResultT>;\nexport function buildModelComputedView<VariablesT, ResultT>(\n  operation: ComputedViewOperation\n): ComputedViewWithVariables<VariablesT, ResultT> | ComputedViewWithoutVariables<ResultT> {\n  const f = operation.variables\n    ? async function (this: AnyModelManager, variables: Record<string, any> = {}) {\n        let resultVariables: VariablesOptions | undefined;\n        if (operation.variables) {\n          resultVariables = {};\n          for (const [name, variable] of Object.entries(operation.variables)) {\n            resultVariables[name] = {\n              value: variables[name],\n              ...variable,\n            };\n          }\n        }\n        return await computedViewRunner(this.connection, operation.gqlFieldName, resultVariables, operation.namespace);\n      }\n    : async function (this: AnyModelManager) {\n        return await computedViewRunner(this.connection, operation.gqlFieldName, undefined, operation.namespace);\n      };\n\n  return Object.assign(f, operation, {\n    plan: function (variables: VariablesOptions) {\n      return computedViewOperation(operation.gqlFieldName, variables, operation.namespace);\n    },\n  }) as any;\n}\n\nexport function buildInlineComputedView(client: { connection: GadgetConnection }, operation: ComputedViewOperation) {\n  const f = async function (query: string, variables?: Record<string, any>) {\n    return await inlineComputedViewRunner(client.connection, operation.gqlFieldName, query, variables, operation.namespace);\n  };\n  return Object.assign(f, operation) as any;\n}\n\nexport function buildInlineModelComputedView(operation: ComputedViewOperation) {\n  const f = async function (this: AnyModelManager, query: string, variables?: Record<string, any>) {\n    return await inlineComputedViewRunner(this.connection, operation.gqlFieldName, query, variables, operation.namespace);\n  };\n  return Object.assign(f, operation) as any;\n}\n\nexport function isInlineComputedView(operation: ComputedViewOperation): boolean {\n  return operation.functionName == \"view\";\n}\n\n/**\n * Maps the variables passed from a call to the client to the variables the GraphQL API is expecting\n *\n * For actions which accept a model input, the GraphQL API expects the variables to be passed like\n *  id: 123,\n *  widget: { fieldA: \"a\", fieldB: \"b\" },\n *  extraParam: \"C\"\n *\n * For convenience, we allow actions to be invoked like\n *   await api.widget.update(\"123\", {fieldA: \"a\", fieldB: \"b\", extraParam: \"C\"})\n *\n * This function re-nests the model input variables under a key for the model's api identifier, being careful to leave root level params alone.\n **/\nfunction disambiguateActionParams<Action extends AnyActionFunctionRuntimeMetadata>(\n  action: Action,\n  idValue: string | undefined,\n  variables: Record<string, any> = {}\n): Record<string, any> {\n  if (action.hasAmbiguousIdentifier) {\n    if (Object.keys(variables).some((key) => !action.paramOnlyVariables?.includes(key) && key !== action.modelApiIdentifier)) {\n      throw Error(`Invalid arguments found in variables. Did you mean to use ({ ${action.modelApiIdentifier}: { ... } })?`);\n    }\n  }\n\n  let newVariables: Record<string, any>;\n  const idVariable = Object.entries(action.variables).find(([key, value]) => key === \"id\" && value.type === \"GadgetID\");\n\n  if ((action as any).acceptsModelInput || action.hasCreateOrUpdateEffect) {\n    if (\n      (action.modelApiIdentifier in variables &&\n        typeof variables[action.modelApiIdentifier] === \"object\" &&\n        variables[action.modelApiIdentifier] !== null) ||\n      !action.variables[action.modelApiIdentifier]\n    ) {\n      newVariables = variables;\n    } else {\n      newVariables = {\n        [action.modelApiIdentifier]: {},\n      };\n      for (const [key, value] of Object.entries(variables)) {\n        if (action.paramOnlyVariables?.includes(key)) {\n          newVariables[key] = value;\n        } else {\n          if (idVariable && key === idVariable[0]) {\n            newVariables[\"id\"] = value;\n          } else {\n            newVariables[action.modelApiIdentifier][key] = value;\n          }\n        }\n      }\n    }\n  } else {\n    newVariables = variables;\n  }\n\n  newVariables[\"id\"] ??= idValue as any;\n\n  return newVariables;\n}\n\n/** Split out the arguments to a call to an action */\nfunction actionArgs(\n  operation: AnyActionFunctionRuntimeMetadata,\n  hasId: boolean,\n  hasOthers: boolean,\n  args: (string | Record<string, unknown> | BaseFindOptions)[]\n): [variables: VariablesOptions, options?: BaseFindOptions] {\n  let id: string | undefined = undefined;\n  let params: Record<string, unknown> | undefined = undefined;\n\n  if (hasId) {\n    id = args.shift() as string | undefined;\n  }\n  if (hasOthers) {\n    params = args.shift() as Record<string, unknown> | undefined;\n  }\n  const options = args.shift() as BaseFindOptions;\n\n  let unambiguousParams = params;\n  if (id || params) {\n    unambiguousParams = disambiguateActionParams(operation, id, params);\n  }\n\n  const resultVariables: VariablesOptions = {};\n  for (const [name, variable] of Object.entries(operation.variables)) {\n    resultVariables[name] = {\n      value: name == \"id\" ? id : unambiguousParams?.[name],\n      ...variable,\n    };\n  }\n\n  return [resultVariables, options];\n}\n\n/** Given a result from a finder function that is either a promise for one value or an async iterator over many values, transform each value using a function, returning the same cardinality as the input */\nfunction forEachMaybeLiveResponse<Item, Result>(response: AsyncIterable<Item>, transform: (item: Item) => Result): AsyncIterable<Result>;\nfunction forEachMaybeLiveResponse<Item, Result>(response: Promise<Item>, transform: (item: Item) => Result): Promise<Result>;\nfunction forEachMaybeLiveResponse<Item, Result>(\n  response: AsyncIterable<Item> | Promise<Item>,\n  transform: (item: Item) => Result\n): AsyncIterable<Result> | Promise<Result> {\n  if (Symbol.asyncIterator in response) {\n    return {\n      [Symbol.asyncIterator]: async function* () {\n        for await (const item of response) {\n          yield transform(item);\n        }\n      },\n    };\n  } else {\n    return response.then(transform);\n  }\n}\n\nconst sendDevHarnessStubbedActionEvent = (operation: StubbedActionOperation) => {\n  try {\n    if (typeof window !== \"undefined\" && typeof CustomEvent === \"function\") {\n      const event = new CustomEvent(\"gadget:devharness:stubbedActionError\", {\n        detail: {\n          reason: operation.reason,\n          action: {\n            functionName: operation.functionName,\n            actionApiIdentifier: operation.actionApiIdentifier,\n            modelApiIdentifier: operation.modelApiIdentifier,\n            dataPath: operation.dataPath,\n          },\n        },\n      });\n      window.dispatchEvent(event);\n    }\n  } catch (error: any) {\n    // gracefully handle environments where CustomEvent is misbehaved like jsdom\n    console.warn(\"[gadget] error dispatching gadget dev harness event\", error);\n  }\n};\n"],
  "mappings": "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",
  "names": []
}
