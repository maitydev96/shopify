{"version":3,"sources":["/var/gadget/codegen/framework-1756630026360-Css7ce/src/react-router/ErrorBoundary.tsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { InconsolataFont, overlayTemplate } from \"../core/errors/overlay.js\";\n\nconst ErrorBoundaryContainer = ({ children }: { children: React.ReactNode }): JSX.Element => {\n  return (\n    <html>\n      <head>\n        <meta charSet=\"UTF-8\" />\n      </head>\n      {children}\n    </html>\n  );\n};\n\nexport const ProductionErrorPage = (): JSX.Element => {\n  return (\n    <ErrorBoundaryContainer>\n      <head>\n        <style>{InconsolataFont}</style>\n      </head>\n      <body\n        style={{\n          alignItems: \"center\",\n          display: \"flex\",\n          justifyContent: \"center\",\n          height: \"100vh\",\n        }}\n      >\n        <div\n          style={{\n            display: \"flex\",\n            padding: \"12px\",\n            flexDirection: \"column\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            width: \"100%\",\n            height: \"100%\",\n            gap: \"12px\",\n            fontSize: \"16px\",\n            fontWeight: \"700\",\n          }}\n        >\n          <div style={{ fontSize: \"48px\" }}>⚠️</div>\n          <div>Application Error</div>\n          <div>Please contact the developer of this app to help you troubleshoot the issue.</div>\n        </div>\n      </body>\n    </ErrorBoundaryContainer>\n  );\n};\n\nexport function DevelopmentErrorBoundary({ error }: { error: { status: number; statusText: string; data: any } | Error }): JSX.Element {\n  let title: string;\n  let data: string | undefined;\n\n  if (\"status\" in error && \"statusText\" in error && \"data\" in error) {\n    title = `${error.status}${error.statusText ? `: ${error.statusText}` : \"\"}`;\n    data = error.data;\n  } else if (error instanceof Error) {\n    title = `Error: ${error.message}`;\n    data = error.stack;\n  } else {\n    title = \"An unknown error occurred\";\n  }\n\n  const { html, javascript } = overlayTemplate({\n    style: \"rr7Frontend\",\n    errorMessage: title,\n    stackTrace: data,\n    environmentSlug: process.env.GADGET_ENV!,\n  });\n\n  useEffect(() => {\n    try {\n      const existingScript = document.head.querySelector(\"script[data-error-boundary]\");\n      if (!existingScript) {\n        const script = document.createElement(\"script\");\n        script.setAttribute(\"data-error-boundary\", \"true\"); // Add identifier\n        script.appendChild(document.createTextNode(javascript));\n        document.head.appendChild(script);\n      }\n    } catch (err) {\n      console.warn(\"Failed to inject error boundary script\", err);\n    }\n  }, [javascript]);\n\n  return (\n    <ErrorBoundaryContainer>\n      <body>\n        <div\n          dangerouslySetInnerHTML={{\n            __html: html,\n          }}\n        ></div>\n      </body>\n\n      {typeof window === \"undefined\" && <script dangerouslySetInnerHTML={{ __html: javascript }} />}\n    </ErrorBoundaryContainer>\n  );\n}\n\nexport function ErrorBoundary({ error }: { error: { status: number; statusText: string; data: any } | Error }): React.ReactNode {\n  if (process.env.NODE_ENV === \"production\") {\n    return <ProductionErrorPage />;\n  }\n\n  return <DevelopmentErrorBoundary error={error} />;\n}\n"],"names":["React","useEffect","InconsolataFont","overlayTemplate","ErrorBoundaryContainer","children","html","head","meta","charSet","ProductionErrorPage","style","body","alignItems","display","justifyContent","height","div","padding","flexDirection","width","gap","fontSize","fontWeight","DevelopmentErrorBoundary","error","title","data","status","statusText","Error","message","stack","javascript","errorMessage","stackTrace","environmentSlug","process","env","GADGET_ENV","existingScript","document","querySelector","script","createElement","setAttribute","appendChild","createTextNode","err","console","warn","dangerouslySetInnerHTML","__html","window","ErrorBoundary","NODE_ENV"],"mappings":"AAAA,OAAOA,SAASC,SAAS,QAAQ,QAAQ;AACzC,SAASC,eAAe,EAAEC,eAAe,QAAQ,4BAA4B;AAE7E,MAAMC,yBAAyB,CAAC,EAAEC,QAAQ,EAAiC;IACzE,qBACE,oBAACC,4BACC,oBAACC,4BACC,oBAACC;QAAKC,SAAQ;SAEfJ;AAGP;AAEA,OAAO,MAAMK,sBAAsB;IACjC,qBACE,oBAACN,4CACC,oBAACG,4BACC,oBAACI,eAAOT,iCAEV,oBAACU;QACCD,OAAO;YACLE,YAAY;YACZC,SAAS;YACTC,gBAAgB;YAChBC,QAAQ;QACV;qBAEA,oBAACC;QACCN,OAAO;YACLG,SAAS;YACTI,SAAS;YACTC,eAAe;YACfN,YAAY;YACZE,gBAAgB;YAChBK,OAAO;YACPJ,QAAQ;YACRK,KAAK;YACLC,UAAU;YACVC,YAAY;QACd;qBAEA,oBAACN;QAAIN,OAAO;YAAEW,UAAU;QAAO;OAAG,qBAClC,oBAACL,aAAI,oCACL,oBAACA,aAAI;AAKf,EAAE;AAEF,OAAO,SAASO,yBAAyB,EAAEC,KAAK,EAAwE;IACtH,IAAIC;IACJ,IAAIC;IAEJ,IAAI,YAAYF,SAAS,gBAAgBA,SAAS,UAAUA,OAAO;QACjEC,QAAQ,GAAGD,MAAMG,MAAM,GAAGH,MAAMI,UAAU,GAAG,CAAC,EAAE,EAAEJ,MAAMI,UAAU,EAAE,GAAG,IAAI;QAC3EF,OAAOF,MAAME,IAAI;IACnB,OAAO,IAAIF,iBAAiBK,OAAO;QACjCJ,QAAQ,CAAC,OAAO,EAAED,MAAMM,OAAO,EAAE;QACjCJ,OAAOF,MAAMO,KAAK;IACpB,OAAO;QACLN,QAAQ;IACV;IAEA,MAAM,EAAEpB,IAAI,EAAE2B,UAAU,EAAE,GAAG9B,gBAAgB;QAC3CQ,OAAO;QACPuB,cAAcR;QACdS,YAAYR;QACZS,iBAAiBC,QAAQC,GAAG,CAACC,UAAU;IACzC;IAEAtC,UAAU;QACR,IAAI;YACF,MAAMuC,iBAAiBC,SAASlC,IAAI,CAACmC,aAAa,CAAC;YACnD,IAAI,CAACF,gBAAgB;gBACnB,MAAMG,SAASF,SAASG,aAAa,CAAC;gBACtCD,OAAOE,YAAY,CAAC,uBAAuB;gBAAS,iBAAiB;gBACrEF,OAAOG,WAAW,CAACL,SAASM,cAAc,CAACd;gBAC3CQ,SAASlC,IAAI,CAACuC,WAAW,CAACH;YAC5B;QACF,EAAE,OAAOK,KAAK;YACZC,QAAQC,IAAI,CAAC,0CAA0CF;QACzD;IACF,GAAG;QAACf;KAAW;IAEf,qBACE,oBAAC7B,4CACC,oBAACQ,4BACC,oBAACK;QACCkC,yBAAyB;YACvBC,QAAQ9C;QACV;SAIH,OAAO+C,WAAW,6BAAe,oBAACV;QAAOQ,yBAAyB;YAAEC,QAAQnB;QAAW;;AAG9F;AAEA,OAAO,SAASqB,cAAc,EAAE7B,KAAK,EAAwE;IAC3G,IAAIY,QAAQC,GAAG,CAACiB,QAAQ,KAAK,cAAc;QACzC,qBAAO,oBAAC7C;IACV;IAEA,qBAAO,oBAACc;QAAyBC,OAAOA;;AAC1C"}